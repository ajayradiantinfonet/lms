{% extends 'user_lms/header_1.html' %}

{% load static %}


<style>
/*form css */

</style>


<!-- <!doctype html>
<html lang="en">
  <head>
       <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">

   
   <link href = "https://fonts.googleapis.com/icon?family=Material+Icons" rel = "stylesheet">
  
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	  
	 
	  <link rel="stylesheet" href="css/style.css">

    <title>Course cards</title>

  </head>
  <body> -->


{% block course_details %}

<!--
<nav class="navbar navbar-expand-lg nav_bar">
<div class="container">
<div class="collapse navbar-collapse nav_h3">
    <h3>Certificates</h3>
     </div>
 </div>
   </nav> -->

 <link href = "https://fonts.googleapis.com/icon?family=Material+Icons" rel = "stylesheet">


 <meta property="og:title" content="Join the best company in the world!" />
<meta property="og:url" content="http://sharethis.com" />
<meta property="og:image" content="http://sharethis.com/images/logo.jpg" />
<meta property="og:description" content="ShareThis is its people. It's imperative that we hire smart,innovative people who can work intelligently as we continue to disrupt the very category we created. Come join us!" />
<meta property="og:site_name" content="ShareThis" />
<style>
       

.nav_h3 h3
{
  font-size: 20px;
}
.shadow_box
{
  padding: 9px 6px;
  /*box-shadow: 0 7px 17px 0 rgba(0,0,0,.2), 0 6px 20px 0 transparent;*/
}
.btn_upload1 {
    width: 105px;
    height: 30px;
    margin: 12px 50px;
    background:#cbe5cb63;
    /* box-shadow: 0px 3px 6px #00000029; */
    border-radius: 3px;
    opacity: 1;
    color: #000;
    padding: 1px;
    border: 1px solid #80808073;
}
.part-1
{
  padding: 0px 46px;
}
.upload-img{
  width: 12px;
}
.btn_upload1 span{
  font-size: 12px;
  padding: 4px;
}

.upload-img1
{
    width: 29px;
    height: 29px;
    border-radius: 50%;
    margin-right: 10px;
}
.card-margin{
    position: relative;
    padding: 4px 47px;
}
.rating_check span{
  font-size: 13px;
}
.card_div
{
  margin-top: 23px;
}
.p-bar{
  height: 5px;
  width: 100%;
}
.p-complete{
  background: #4CA64A;
}
.progress_bar{
  padding: 10px 1px;
}
.upload-image{
  width: 15px;
}
.img-part1 img
{
  width: 185px;
  height: 126px;
  border-radius: 8px;
}
.btn_close span{
  font-size: 20px;
}
.dialog-margin{
  margin-top: 240px;
}
.modal-height{
  height: 246px;
}
.social-btn{
  padding: 19px 36px;
}


@import url(//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css);
@import url(http://fonts.googleapis.com/css?family=Titillium+Web&subset=latin,latin-ext);
@media (min-width: 768px) {
    .onl_row-sm-offset-3 div:first-child[class*="col-"] {
        margin-left: 25%;
    }
}

.onl_login .onl_socialButtons a 
{
  color: white; // In yourUse @body-bg 
  opacity:0.9;
}
.onl_login .onl_socialButtons a:hover 
{
  color: white;
  opacity:1;      
}
.onl_login .onl_socialButtons .onl_btn-facebook 
{background: #3b5998;border-color:#172d5e}
.onl_login .onl_socialButtons .onl_btn-twitter 
{background: #00aced;border-color:#043d52}
.onl_login .onl_socialButtons .onl_btn-google-plus 
{background: #c32f10;border-color:#6b1301}
.onl_login .onl_socialButtons .onl_btn-linkedin 
{background: #0976b4;border-color:#004269}

body{
  background-color:#f6f5f5;
}


</style>


<div class="row" style="background:#CBE5CB;padding-top:1%;">
<h3 style="margin-left:5%;">Certificate</h3>
</div>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>


  {% ifequal all_course|length 0 %}
              <p>&nbsp;&nbsp;There is no certificate available</p>
  {% endifequal %}

{% for course in all_course %}
<div class="card_div" style="width:50%;margin-left:15%;margin-top:2%;background-color: white;">
  <div class="shadow_box" style="border-radius:2px;">
    <div class="row">

      <div class="col-md-3">
        <div class="img-part1" style="height:100%;"> 
          <img src="{{ course.thumbnail.url }}" style="height:100%;">
        </div>
      </div>


      <div class="col-md-9 part-1">
        <h6>{{ course.name }}</h6> 
        <p style="font-size:12px;">Lesson 15 of 25</p>
            
        <div class="row">
          <div class="col-md-1"><img src="{% static 'user_lms/img/eye-line.svg' %}" class='upload-image'>
          </div>
          <div class="col-md-11">
          <p>{{ course.teacher }}</p>
          </div>
        </div>

        <div class="row">
          <div class="col-md-3 part-2" style="font-size:12px;">{{course.percentage}}% Complete</div>
            <div class="col-md-9 progress_bar">
              <div class="progress p-bar">
                <div data-percentage="0%" style="width: {{course.percentage}}%;" class="progress-bar p-complete" role="progressbar" aria-valuemin="{{ course.percentage }}" aria-valuemax="100">
                  
                </div>
              </div>
            </div>
        </div>


        <div class="row">
          <div class="col-sm-3"><img src="{% static 'user_lms/img/img1.jpg' %}" class='upload-img1'></div>
            <div class="col-sm-3"><p style="font-size:12px;">John Doe</p></div>
              <div class="col-sm-6 rating_check">
                <span>Your Rating</span>
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star"></span>
              </div>
        </div>
      </div>

    </div>
  </div>
</div>



  
  
  <div class="row" style="width:50%;margin-left:15%;">
    <label class="btn btn_upload1"  
    data-attr='{{ course.certificate|safe }}' data-id="{{ course.id}}" 
    onclick="preview(this)">
      <img src="{% static 'user_lms/img/play-outline.svg' %}" class='upload-img'><span>Preview</span>
    </label>
    {% if course.certificate %}

      {% ifequal course.percentage 100 %}
      <label class="btn btn_upload1" data-attr='{{course.certificate|safe}}' data-id="{{ course.id}}" onclick="download(this)">
        <img src="{% static 'user_lms/img/download.svg' %}" 
        class='upload-img'><span>Download</span>

        <div style="" id="download_cer{{course.id}}">
            
        </div>
      </label>
    
      <label class="btn btn_upload1" data-toggle="modal"
       data-target="#myModal{{course.id}}">
        <img src="{% static 'user_lms/img/share.svg' %}" 
        class='upload-img'>
        <span>Share</span>
      </label>
    {% endifequal %}
 
  {% endif %}
  </div>


  <!-- model for preview -->

   <div class="modal fade" id="preview{{course.id}}" style="z-index:9999;" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
          <div class="modal-dialog dialog-margin modal-lg">
            <div class="modal-content">
              <div class="modal-header">
                <button type="button" class="close btn_close" data-dismiss="modal"><span aria-hidden="true">×</span><span class="sr-only">Close</span></button>
              </div>
              <div class="modal-body certificate_u" id="preview_certificate{{course.id}}" >

              </div>
            </div>
          </div>
    </div>

    
                 

<!-- modal start -->

<div class="modal fade" id="myModal{{course.id}}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
          <div class="modal-dialog dialog-margin">
            <div class="modal-content modal-height">
              <div class="modal-header">
                <button type="button" class="close btn_close" data-dismiss="modal"><span aria-hidden="true">×</span><span class="sr-only">Close</span></button>
              </div>
              <div class="modal-body">
                <!-- <div class="button share-button facebook-share-button">share</div> <div class="button share-button twitter-share-button">tweet</div>  -->

                <!-- AddToAny BEGIN -->
<!-- AddToAny BEGIN -->

<div class="a2a_kit a2a_kit_size_32 a2a_default_style" data-a2a-url="https://zak.web.com/download_certificate?otype=image&courseid={{course.id}}&userid={{user.id}}" data-a2a-title="Hi check out my certificate which i gained on {{course.name}} <br/>">

<center>
  <a class="a2a_button_facebook" style="padding-top:10px;padding-right:10px;
  padding-bottom: 10px;padding-left:50px;"></a>
  <a class="a2a_button_twitter" style="padding:10px;"></a>
  <a class="a2a_button_email" style="padding:10px;"></a>
  <a class="a2a_button_linkedin" style="padding:10px;"></a>
  <a class="a2a_button_whatsapp" style="padding:10px;"></a>
  <a class="a2a_button_google_gmail" style="padding:10px;"></a>
</center>

</div>
<script async src="https://static.addtoany.com/menu/page.js"></script>
<!-- AddToAny END -->
<!-- AddToAny END -->

        
    <!-- <div class="onl_login">
       <div class="row onl_socialButtons social-btn">
          <div class="col-xs-3 col-sm-3">
            <a href="#" class="btn btn-lg btn-block onl_btn-facebook" data-toggle="tooltip" data-placement="top" title="Facebook">
              <i class="fab fa-facebook"></i>
             
            </a>
          </div>
          <div class="col-xs-3 col-sm-3">
            <a href="#" class="btn btn-lg btn-block onl_btn-twitter" data-toggle="tooltip" data-placement="top" title="Twitter">
              <i class="fab fa-twitter"></i>
             
            </a>
          </div>  
          <div class="col-xs-3 col-sm-3">
            <a href="#" class="btn btn-lg btn-block onl_btn-google-plus" data-toggle="tooltip" data-placement="top" title="Google Plus">
              <i class="fab fa-google-plus"></i>
            
            </a>
          </div>  
 
          <div class="col-xs-3 col-sm-3">
            <a href="#" class="btn btn-lg btn-block onl_btn-linkedin" data-toggle="tooltip" data-placement="top" title="LinkedIn">
              <i class="fab fa-linkedin"></i>
          </a>
          </div>

          {% if is_mobile %}
          <div class="col-xs-3 col-sm-3">
            <a href="whatsapp://send?text=https://192.168.1.117/download_certificate/img/{{course.orgid}}/{{user.id}}"
             class="btn btn-lg btn-block onl_btn-linkedin"data-action="share/whatsapp/share" target="_blank" data-toggle="tooltip" data-placement="top" title="whatsapp">
              <i class="fab fa-linkedin"></i>
            </a>
          </div>
          {% endif %}

           
      </div>
    </div> -->
 </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
    </div>
  </div>
 </div>
</div>

<!-- modal end -->


           
</div>

{% endfor %}


{% endblock %}

{% block inpage_script %}


  <script>

      function download(elm)
      {
        
        var cer=$(elm).attr("data-attr");
        var id=$(elm).attr("data-id");
        var x=document.getElementById("download_cer"+id);
        x.innerHTML='';

        x.innerHTML=cer;
        x.style.display="block";
        //var gi=document.getElementById("certificate_upper");
        //var div=document.createElement('div');
        //div.innerHTML=cer;
        // var div1=document.createElement('div');
        // div1.style.display="none";
        // div1.innerHTML=cer;
        //div.style.display="none";
        //console.log("fjfjjfjfjfj",d3.selectAll("#crossline"));
        if(d3.selectAll("#crossline")!=null && d3.selectAll("#crossbutton")!=null){
           d3.selectAll("#crossline").remove();
           d3.selectAll("#crossbutton").remove();
        }
        d3.selectAll('g').select("#candidatename").text("{{ user }}").
        attr("baseline","middle");
        // document.body.appendChild(div);
        // document.body.appendChild(div1);
        // domtoimage.toJpeg(x.firstChild.nextElementSibling).then(function (dataUrl) {
        //   var link = document.createElement('a');
        //   link.download = 'my-certificate.jpeg';
        //   link.href = dataUrl;
        //   link.click();
        //  }).catch(function (error) {
        //     console.error('oops, something went wrong!', error);
        // });

        domtoimage.toPng(x, { quality: 0.95 })
          .then(function (dataUrl) {
          x.style.display='none';
          var link = document.createElement('a');
          link.download = 'my-image-name.png';
          link.href = dataUrl;
          link.click();

        });



        //div1.style.display="none";

        // html2canvas(x).then({
        //   function(canvas){
        //     div.appendChild(canvas);
        //     console.log(canvas);
        //     var imgData = canvas.toDataURL('image/png');
        //     console.log(imgData);
        //   }
        // });

        // html2canvas(div1).then( 
        //         function (canvas) { 
        //           //document.getElementById('output').appendChild(canvas); 
        //             //alert("checking ...");
        //             //div.appendChild(canvas);
        //             var imgData = canvas.toDataURL('image/png');
        //             console.log("dddd",imgData);
        //             //  $.ajax({
        //             //     url :'{% url "customadmin:save_org_cer_img" %}',
        //             //     type:'post',
        //             //     data:{'image':imgData},
        //             //     success:function(data){
        //             //       alert(data);
        //             //     }
        //             // });
        //             // var doc = new jsPDF('p','mm','a4');
        //             // doc.addImage(imgData, 'PNG', 0, 0);
        //             // doc.save('certificate.pdf');
        // });
        //div.remove();
        //div1.remove();
      }

      function preview(elm){
        

        var cer=$(elm).attr("data-attr");
        var id=$(elm).attr("data-id");
        //alert('#preview'+id);
        $('#preview'+id).modal('show');
        $('#preview_certificate'+id).html(cer);
      //$('#preview_certificate'+id).css("width","780px");
      //$('#preview_certificate'+id).css("height","580px");
      //$('.certificate_u > div#certificate > svg').css("width","780px");
      //$('.certificate_u > div#certificate > svg').css("height","780px");
      //$('#preview_certificate'+id+ '> div#certificate').css("width","780px");
      //$('#preview_certificate'+id+ '> div#certificate').css("height","580px");
      // var can_name=d3.selectAll('g').select("#candidatename").text();
      // var actual_name="{{user}}";
      // console.log(d3.selectAll('g').select("#candidatename").attr("transform"));
      //can_name.length();
      d3.selectAll('g').select("#candidatename").text("{{ user }}").
      attr("baseline","middle");

      //console.log(d3.select('.certificate_u > div#certificate > svg'));
      d3.select('#preview_certificate'+id+' > div#certificate > svg').append("g").append("text")
        .attr("x", -130)
        .attr("y", 500)
        .attr("dy", ".35em")
        .style("font", "104px times")
        .attr("fill", "#8cb4cd")
        .attr('transform', 'rotate(-45)')
        //.attr("transform",'translate(100,-200)')
        .text("sample copy");
        //alert(id);

        d3.selectAll("#crossline").remove();
        d3.selectAll("#crossbutton").remove();
      }

    </script>


   <!-- <script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js&product=custom-share-buttons"></script> -->

    <!-- jQuery first, then Popper.js, then Bootstrap JS, then Propeller js -->
     <script src= 
    "https://cdn.jsdelivr.net/npm/html2canvas@1.0.0-rc.5/dist/html2canvas.min.js"> 
    </script> 
   <!--  <script src='{% static "js/jspdf.min.js" %}' type='text/javascript'></script> -->
    <script src='{% static "js/domtoimg.js" %}' type='text/javascript'></script>
    <script src="https://d3js.org/d3.v3.min.js" charset="utf-8"></script>
    <!-- <script src="https://code.jquery.com/jquery-3.3.1.min.js"  crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" crossorigin="anonymous"></script> -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" crossorigin="anonymous"></script>
	  
   <!--  <script src="{% static 'user_lms/js/jquery/jquery-2.2.4.min.js' %}"></script>
    
    <script src="{% static 'user_lms/js/bootstrap/popper.min.js' %}"></script>
   
    <script src="{% static 'user_lms/js/bootstrap/bootstrap.min.js' %}"></script>
   
    <script src="{% static 'user_lms/js/plugins/plugins.js' %}"></script>
    
    <script src="{% static 'user_lms/js/active.js' %}"></script> -->
	<script>

  // panel dropdown

		 $('.panel-collapse').on('show.bs.collapse', function () {
		    $(this).siblings('.panel-heading').addClass('active');
		  });

  $('.panel-collapse').on('hide.bs.collapse', function () {
    $(this).siblings('.panel-heading').removeClass('active');
  });



  // show hide
  // 1 panel

$('#show-more-content').hide();

$('#show-more').click(function(){
	$('#show-more-content').show(300);
	$('#show-less').show();
	$('#show-more').hide();
});

$('#show-less').click(function(){
	$('#show-more-content').hide(150);
	$('#show-more').show();
	$(this).hide();
});

// 2 panel
$('#show-more-content1').hide();

$('#show-more1').click(function(){
	$('#show-more-content1').show(300);
	$('#show-less1').show();
	$('#show-more1').hide();
});

$('#show-less1').click(function(){
	$('#show-more-content1').hide(150);
	$('#show-more1').show();
	$(this).hide();
});




$(function () {
  $('[data-toggle="tooltip"]').tooltip()
})

	</script>

{% endblock %}
  </body>
}
</html>